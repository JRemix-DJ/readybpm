VCanvas_vml=createClass(VCanvas_base,{init:function(e,i,t){var s;VCanvas_vml._super.init.call(this,e,i,t),t[0]&&(t=t[0]),$.data(t,"_jqs_vcanvas",this),this.canvas=document.createElement("span"),$(this.canvas).css({display:"inline-block",position:"relative",overflow:"hidden",width:e,height:i,margin:"0px",padding:"0px",verticalAlign:"top"}),this._insert(this.canvas,t),this._calculatePixelDims(e,i,this.canvas),this.canvas.width=this.pixelWidth,this.canvas.height=this.pixelHeight,s='<v:group coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'" style="position:absolute;top:0;left:0;width:'+this.pixelWidth+"px;height="+this.pixelHeight+'px;"></v:group>',this.canvas.insertAdjacentHTML("beforeEnd",s),this.group=$(this.canvas).children()[0],this.rendered=!1,this.prerender=""},_drawShape:function(e,i,t,s,r){var h=[],a,n,o,p,l,d,c;for(c=0,d=i.length;c<d;c++)h[c]=i[c][0]+","+i[c][1];return a=h.splice(0,1),r=void 0===r?1:r,n=void 0===t?' stroked="false" ':' strokeWeight="'+r+'px" strokeColor="'+t+'" ',o=void 0===s?' filled="false"':' fillColor="'+s+'" filled="true" ',p=h[0]===h[h.length-1]?"x ":"",l='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+e+'" '+n+o+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+a+" l "+h.join(", ")+" "+p+'e"> </v:shape>'},_drawCircle:function(e,i,t,s,r,h,a){var n,o,p;return p='<v:oval  id="jqsshape'+e+'" '+(n=void 0===r?' stroked="false" ':' strokeWeight="'+a+'px" strokeColor="'+r+'" ')+(o=void 0===h?' filled="false"':' fillColor="'+h+'" filled="true" ')+' style="position:absolute;top:'+(t-=s)+"px; left:"+(i-=s)+"px; width:"+2*s+"px; height:"+2*s+'px"></v:oval>'},_drawPieSlice:function(e,i,t,s,r,h,a,n){var o,p,l,d,c,v,u,f;if(r===h)return"";if(h-r==2*Math.PI&&(r=0,h=2*Math.PI),p=i+Math.round(Math.cos(r)*s),l=t+Math.round(Math.sin(r)*s),d=i+Math.round(Math.cos(h)*s),c=t+Math.round(Math.sin(h)*s),p===d&&l===c){if(h-r<Math.PI)return"";p=d=i+s,l=c=t}return p===d&&l===c&&h-r<Math.PI?"":(o=[i-s,t-s,i+s,t+s,p,l,d,c],v=void 0===a?' stroked="false" ':' strokeWeight="1px" strokeColor="'+a+'" ',u=void 0===n?' filled="false"':' fillColor="'+n+'" filled="true" ',f='<v:shape coordorigin="0 0" coordsize="'+this.pixelWidth+" "+this.pixelHeight+'"  id="jqsshape'+e+'" '+v+u+' style="position:absolute;left:0px;top:0px;height:'+this.pixelHeight+"px;width:"+this.pixelWidth+'px;padding:0px;margin:0px;"  path="m '+i+","+t+" wa "+o.join(", ")+' x e"> </v:shape>')},_drawRect:function(e,i,t,s,r,h,a){return this._drawShape(e,[[i,t],[i,t+r],[i+s,t+r],[i+s,t],[i,t]],h,a)},reset:function(){this.group.innerHTML=""},appendShape:function(e){var i=this["_draw"+e.type].apply(this,e.args);return this.rendered?this.group.insertAdjacentHTML("beforeEnd",i):this.prerender+=i,this.lastShapeId=e.id,e.id},replaceWithShape:function(e,i){var t=$("#jqsshape"+e),s=this["_draw"+i.type].apply(this,i.args);t[0].outerHTML=s},replaceWithShapes:function(e,i){var t=$("#jqsshape"+e[0]),s="",r=i.length,h;for(h=0;h<r;h++)s+=this["_draw"+i[h].type].apply(this,i[h].args);for(t[0].outerHTML=s,h=1;h<e.length;h++)$("#jqsshape"+e[h]).remove()},insertAfterShape:function(e,i){var t=$("#jqsshape"+e),s=this["_draw"+i.type].apply(this,i.args);t[0].insertAdjacentHTML("afterEnd",s)},removeShapeId:function(e){var i=$("#jqsshape"+e);this.group.removeChild(i[0])},getShapeAt:function(e,i,t){var s;return e.id.substr(8)},render:function(){this.rendered||(this.group.innerHTML=this.prerender,this.rendered=!0)}});