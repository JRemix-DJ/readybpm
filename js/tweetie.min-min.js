!function(a){a.fn.twittie=function(e,t){var o="function"==typeof e?e:t,c=a.extend({username:null,list:null,hashtag:null,count:10,hideReplies:!1,dateFormat:"%b/%d/%Y",template:"{{date}} - {{tweet}}",apiPath:"api/tweet.php"},e instanceof Object?e:{});c.list&&!c.username&&a.error("If you want to fetch tweets from a list, you must define the username of the list owner.");var h=function(e){return e.replace(/(https?:\/\/([-\w\.]+)+(:\d+)?(\/([\w\/_\.]*(\?\S+)?)?)?)/gi,'<a href="../$1" target="_blank" title="Visit this link">$1</a>').replace(/#([a-zA-Z0-9_]+)/g,'<a href="http://twitter.com/search?q=%23$1&amp;src=hash" target="_blank" title="Search for #$1">#$1</a>').replace(/@([a-zA-Z0-9_]+)/g,'<a href="http://twitter.com/$1" target="_blank" title="$1 on Twitter">@$1</a>')},p=function(e){for(var t=c.template,a="date tweet avatar url retweeted screen_name user_name".split(" "),r=0,n=a.length;r<n;r++)t=t.replace(new RegExp("{{"+a[r]+"}}","gi"),e[a[r]]);return t};this.html("<span>Loading...</span>");var m=this;a.getJSON(c.apiPath,{username:c.username,list:c.list,hashtag:c.hashtag,count:c.count,exclude_replies:c.hideReplies},function(l){m.find("span").fadeOut("fast",function(){m.html("<ul></ul>");for(var e=0;e<c.count;e++){var t=!1;if(l[e])t=l[e];else{if(void 0===l.statuses||!l.statuses[e])break;t=l.statuses[e]}for(var a=t.user.name,r,r=(r=t.created_at).split(" "),r=new Date(Date.parse(r[1]+" "+r[2]+", "+r[5]+" "+r[3]+" UTC")),n="January February March April May June July August September October November December".split(" "),r={"%d":r.getDate(),"%m":r.getMonth()+1,"%b":n[r.getMonth()].substr(0,3),"%B":n[r.getMonth()],"%y":String(r.getFullYear()).slice(-2),"%Y":r.getFullYear()},n=c.dateFormat,s=c.dateFormat.match(/%[dmbByY]/g),i=0,u=s.length;i<u;i++)n=n.replace(s[i],r[s[i]]);t={user_name:a,date:n,tweet:t.retweeted?h("RT @"+t.user.screen_name+": "+t.retweeted_status.text):h(t.text),avatar:'<img src="'+t.user.profile_image_url+'" />',url:"http://twitter.com/"+t.user.screen_name+"/status/"+t.id_str,retweeted:t.retweeted,screen_name:h("@"+t.user.screen_name)},m.find("ul").append("<li>"+p(t)+"</li>")}"function"==typeof o&&o()})})}}(jQuery);